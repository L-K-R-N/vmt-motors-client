import{b as S,a as d,r as C,f as B,j as e}from"./index-CQRie-QK.js";import{S as _,P as $}from"./ProductService-OyHgk80s.js";import{u as L}from"./index.esm-CD4FniY2.js";import{T as s}from"./TextFieldController-LHNQP8KI.js";import{u as R}from"./useLayout-DJYthvYo.js";import{A}from"./AdvertCard-SP7It2Wb.js";const E="_form_tbyfw_148",U="_wrapper_tbyfw_192",G="_line_tbyfw_197",D="_title_tbyfw_239",Y="_resetBtn_tbyfw_276",H="_submitBtn_tbyfw_286",l={form:E,wrapper:U,line:G,title:D,resetBtn:Y,submitBtn:H,"filter-form":"_filter-form_tbyfw_334","filter-form__input":"_filter-form__input_tbyfw_339","filter-form__input-ico":"_filter-form__input-ico_tbyfw_344","filter-form__input-container":"_filter-form__input-container_tbyfw_352","filter-form__button":"_filter-form__button_tbyfw_355"},I=()=>{const{handleSubmit:r,formState:{errors:t},control:c,reset:n}=L({mode:"onChange"}),u=S(),{products:m}=d(o=>o.ProductsReducer),{brands:f,models:p}=d(o=>o.FilterReducer),b=o=>{let a=[...m];const{brand:P,color:x,driveUnit:h,fuel:j,gear:w,mileage:v,priceFrom:T,priceTo:q,withPhoto:M,yearFrom:F,yearTo:g}=o;P&&(a=a.filter(i=>i.brand.value===P.value)),j&&(a=a.filter(i=>i.fuel.value===j.value)),w&&(a=a.filter(i=>i.gear.value===w.value)),h&&(a=a.filter(i=>i.driveUnit.value===h.value)),x&&(a=a.filter(i=>i.color===x.value)),T&&(a=a.filter(i=>i.price>=T)),q&&(a=a.filter(i=>i.price<=q)),v&&(a=a.filter(i=>i.mileage<=v)),M&&(a=a.filter(i=>i.photoId)),F&&(a=a.filter(i=>i.year>=Number(F))),g&&(a=a.filter(i=>(console.log(g,i.year),i.year<=Number(g)))),u(B(a))};return C.useMemo(()=>({errors:t,onSubmit:b,control:c,handleSubmit:r,reset:n}),[t,f,p])},O=()=>{const{control:r,errors:t,handleSubmit:c,onSubmit:n}=I(),{brands:u,driveUnits:m,fuels:f,gears:p,colors:b}=d(o=>o.FilterReducer);return e.jsx("div",{className:l.wrapper,children:e.jsxs("form",{className:l.form,onSubmit:c(n),children:[e.jsxs("div",{className:l.line,children:[e.jsx(_,{control:r,errors:t,name:"brand",placeholder:"Brand",options:u,isMulti:!1,rules:{required:!1}}),e.jsx(s,{control:r,errors:t,name:"model",label:"Model",fieldType:"input",rules:{required:!1}})," ",e.jsx(s,{control:r,errors:t,name:"priceFrom",fieldType:"input",label:"Price from $",rules:{required:!1}}),e.jsx(s,{fieldType:"input",label:"Generation",control:r,errors:t,name:"generation",placeholder:"Generation",rules:{required:!1}}),e.jsx(s,{control:r,errors:t,name:"yearFrom",label:"Year from",fieldType:"input",rules:{required:!1}}),e.jsx(_,{control:r,errors:t,name:"gear",placeholder:"Gear",options:p,rules:{required:!1},isMulti:!1}),e.jsx(_,{control:r,errors:t,rules:{required:!1},name:"fuel",placeholder:"Fuel",options:f,isMulti:!1}),e.jsx(_,{control:r,errors:t,rules:{required:!1},name:"driveUnit",placeholder:"Drive unit",options:m,isMulti:!1}),e.jsx(s,{control:r,errors:t,rules:{required:!1},name:"priceTo",fieldType:"input",label:"Price to $"}),e.jsx(s,{control:r,errors:t,name:"yearTo",label:"Year to",fieldType:"input",rules:{required:!1}})]}),e.jsxs("div",{className:l.line,children:[e.jsx("h5",{className:l.title,children:"Color"}),e.jsx("h5",{className:l.title,children:"Car mileage"}),e.jsx("h5",{className:l.title,children:"Car from"}),e.jsx(s,{control:r,errors:t,name:"mileage",fieldType:"input",label:"Mileage",rules:{required:!1}}),e.jsx(s,{control:r,errors:t,name:"carFrom",label:"Car from",fieldType:"input",rules:{required:!1},disabled:!0}),e.jsx(s,{control:r,errors:t,name:"withPhoto",label:"With photo",fieldType:"input",rules:{required:!1},disabled:!0}),e.jsx(s,{control:r,errors:t,name:"notSold",label:"Not Sold",fieldType:"input",rules:{required:!1},disabled:!0}),e.jsx(_,{control:r,errors:t,name:"color",placeholder:"Color",options:b,isMulti:!1,rules:{required:!1}}),e.jsx(s,{control:r,errors:t,name:"coloring",fieldType:"input",rules:{required:!1},label:"Coloring"})]}),e.jsxs("div",{className:l.line,children:[e.jsx(s,{control:r,errors:t,name:"exchange",label:"Exchange",fieldType:"input",rules:{required:!1},disabled:!0}),e.jsx(s,{control:r,errors:t,name:"trade",label:"Trade",fieldType:"input",rules:{required:!1},disabled:!0}),e.jsx(s,{control:r,errors:t,name:"any",label:"Any",fieldType:"input",rules:{required:!1},disabled:!0}),e.jsx(s,{control:r,errors:t,name:"owner",label:"Owner",fieldType:"input",rules:{required:!1},disabled:!0}),e.jsx(s,{control:r,errors:t,name:"owner",label:"Private owner",fieldType:"input",rules:{required:!1},disabled:!0}),e.jsx(s,{control:r,errors:t,name:"owner",label:"Company",fieldType:"input",rules:{required:!1},disabled:!0}),e.jsx("h5",{className:l.title,children:"Seller"}),e.jsx("button",{title:"Clear filters",type:"button",className:l.resetBtn,children:"Reset"}),e.jsx("button",{title:"Show filters",type:"submit",className:l.submitBtn,children:"Show"})]})]})})},W="_title_9c3yb_148",k="_wrapper_9c3yb_156",z="_filterForm_9c3yb_161",J="_ads_9c3yb_165",K="_mainPage__intro_9c3yb_171",Q="_mainPage__title_9c3yb_180",V="_mainPage__desc_9c3yb_184",X="_vmt_9c3yb_190",Z="_mainPage__about_9c3yb_193",ee="_mainPage__about_desc_9c3yb_197",te="_mainPage__about_content_9c3yb_200",re="_mainPage__contacts_9c3yb_203",ae="_mainPage__contacts_content_9c3yb_207",ie="_mainPage__contacts_img_9c3yb_207",se="_mainPage__contacts_list_9c3yb_216",le="_mainPage__contacts_social_9c3yb_220",ne="_mainPage__contacts_socialList_9c3yb_223",oe="_container_9c3yb_237",N={title:W,wrapper:k,filterForm:z,ads:J,mainPage__intro:K,mainPage__title:Q,mainPage__desc:V,vmt:X,mainPage__about:Z,mainPage__about_desc:ee,mainPage__about_content:te,mainPage__contacts:re,mainPage__contacts_content:ae,mainPage__contacts_img:ie,mainPage__contacts_list:se,mainPage__contacts_social:le,mainPage__contacts_socialList:ne,container:oe},ce="_title_opm3t_148",_e="_wrapper_opm3t_156",de="_cardList_opm3t_161",y={title:ce,wrapper:_e,cardList:de},ue=()=>{const{filtredProducts:r}=d(t=>t.ProductsReducer);return e.jsx(e.Fragment,{children:e.jsx("div",{className:y.wrapper,children:e.jsx("div",{className:y.cardList,children:r.filter(t=>!t.moderated)?r.filter(t=>!t.moderated).map(t=>e.jsx(A,{advert:t},t.id)):e.jsx("h3",{className:y.errTitle,children:"Товары не найдены"})})})})},Pe=()=>{R();const r=S(),{products:t}=d(n=>n.ProductsReducer),c=async()=>{const n=await $.getProducts();if(n.data,n.status===200)return console.log(n),n.data};return C.useEffect(()=>{c(),r(B(t))},[]),e.jsxs("div",{className:N.ads,children:[e.jsx("div",{className:N.filterForm,children:e.jsx(O,{})}),e.jsx(ue,{})]})};export{Pe as default};
