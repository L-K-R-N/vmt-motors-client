import{c as p,b as g,a as x,r as n,d as S,e as _,j as r,B as d,v as j}from"./index-Cl4qldqq.js";import{a as y}from"./useLayout-Dc8QmR2R.js";import{u as h}from"./index.esm-XEBiVex8.js";import{T as t}from"./TextFieldController-xkqOzTVN.js";import{A as q}from"./AuthLayout-n91NlsLZ.js";const v="_form_elnfm_148",A="_elem_elnfm_154",T="_title_elnfm_164",C="_control_elnfm_178",E="_link_elnfm_183",f={form:v,elem:A,title:T,control:C,link:E},N=()=>{const{handleSubmit:l,formState:{errors:e},control:o}=h({mode:"onChange"}),a=p(),s=g(),{isAuth:u}=x(i=>i.AuthReducer),[m]=n.useState(!1),c=i=>{s(S(!0));try{console.log(i),s(_(i)),localStorage.setItem("isAuth","true"),a("/vmt-motors-client/about"),console.log(u)}catch(b){console.log(b)}};return n.useMemo(()=>({errors:e,onSubmit:c,control:o,handleSubmit:l,isVerifing:m}),[e])},B=()=>{const l=p(),e=N(),[o,a]=n.useState("");y();const{handleSubmit:s}=h({mode:"onChange"}),u=g(),m=()=>{u(j({code:o}))};return n.useLayoutEffect(()=>{localStorage.getItem("isAuth")&&l("/vmt-motors-client/about")},[]),r.jsx(q,{title:"Sign Up",link:"signin",children:e.isVerifing?r.jsxs("form",{className:f.form,onSubmit:s(m),children:[r.jsx("input",{type:"text",value:o,title:"Verification Code",onChange:c=>a(c.target.value)}),r.jsx(d,{type:"submit",title:"Verification",children:"Confirm"})]}):r.jsxs("form",{className:f.form,onSubmit:e.handleSubmit(e.onSubmit),children:[r.jsx(t,{control:e.control,errors:e.errors,label:"Username",name:"username",fieldType:"input",rules:{required:"Username is required"}}),r.jsx(t,{control:e.control,errors:e.errors,label:"Name",name:"name",fieldType:"input",rules:{required:"Name is required"}}),r.jsx(t,{control:e.control,errors:e.errors,label:"Date of birth",name:"dateOfBirth",fieldType:"input",rules:{required:"Date of birth is required"}}),r.jsx(t,{control:e.control,errors:e.errors,label:"Password",name:"password",fieldType:"input",rules:{required:"Password is required"}}),r.jsx(t,{control:e.control,errors:e.errors,label:"Email",name:"email",fieldType:"input",rules:{required:"Email is required"}}),r.jsx(t,{control:e.control,errors:e.errors,label:"Gender",name:"gender",fieldType:"input",rules:{required:"Gender is required"}}),r.jsx(d,{type:"submit",title:"Registration",children:"Sign Up"})]})})};export{B as default};
