import{c as p,b as g,a as x,r as n,d as S,e as _,j as r,B as d,v as j}from"./index-CQRie-QK.js";import{a as y}from"./useLayout-DJYthvYo.js";import{u as h}from"./index.esm-CD4FniY2.js";import{T as t}from"./TextFieldController-LHNQP8KI.js";import{A as q}from"./AuthLayout-BQwh-tJj.js";const A="_form_elnfm_148",T="_elem_elnfm_154",v="_title_elnfm_164",C="_control_elnfm_178",E="_link_elnfm_183",f={form:A,elem:T,title:v,control:C,link:E},N=()=>{const{handleSubmit:l,formState:{errors:e},control:o}=h({mode:"onChange"}),a=p(),s=g(),{isAuth:u}=x(i=>i.AuthReducer),[c]=n.useState(!1),m=i=>{s(S(!0));try{console.log(i),s(_(i)),localStorage.setItem("isAuth","true"),a("/about"),console.log(u)}catch(b){console.log(b)}};return n.useMemo(()=>({errors:e,onSubmit:m,control:o,handleSubmit:l,isVerifing:c}),[e])},B=()=>{const l=p(),e=N(),[o,a]=n.useState("");y();const{handleSubmit:s}=h({mode:"onChange"}),u=g(),c=()=>{u(j({code:o}))};return n.useLayoutEffect(()=>{localStorage.getItem("isAuth")&&l("/about")},[]),r.jsx(q,{title:"Sign Up",link:"signin",children:e.isVerifing?r.jsxs("form",{className:f.form,onSubmit:s(c),children:[r.jsx("input",{type:"text",value:o,title:"Verification Code",onChange:m=>a(m.target.value)}),r.jsx(d,{type:"submit",title:"Verification",children:"Confirm"})]}):r.jsxs("form",{className:f.form,onSubmit:e.handleSubmit(e.onSubmit),children:[r.jsx(t,{control:e.control,errors:e.errors,label:"Username",name:"username",fieldType:"input",rules:{required:"Username is required"}}),r.jsx(t,{control:e.control,errors:e.errors,label:"Name",name:"name",fieldType:"input",rules:{required:"Name is required"}}),r.jsx(t,{control:e.control,errors:e.errors,label:"Date of birth",name:"dateOfBirth",fieldType:"input",rules:{required:"Date of birth is required"}}),r.jsx(t,{control:e.control,errors:e.errors,label:"Password",name:"password",fieldType:"input",rules:{required:"Password is required"}}),r.jsx(t,{control:e.control,errors:e.errors,label:"Email",name:"email",fieldType:"input",rules:{required:"Email is required"}}),r.jsx(t,{control:e.control,errors:e.errors,label:"Gender",name:"gender",fieldType:"input",rules:{required:"Gender is required"}}),r.jsx(d,{type:"submit",title:"Registration",children:"Sign Up"})]})})};export{B as default};
